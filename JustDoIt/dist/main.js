(()=>{"use strict";var t={260:(t,e,i)=>{i.r(e)},859:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(260);const o=n(i(211)),r=i(9);o.default.Instance,(0,r.InitFormModal)()},648:function(t,e,i){var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function d(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(d,s)}l((n=n.apply(t,e||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(i(211)),d=i(9),s=document.getElementById("todo-container"),l=document.getElementById("todo-item-template");let a=null;e.default=function(){return function(t){return class extends t{constructor(...t){var e;super(...t);const i=l.content.cloneNode(!0);this._id=null!==(e=t[3])&&void 0!==e?e:r.default.Instance.GenerateId(),this._imageElement=i.querySelector(".todo-item-icon"),this._titleElement=i.querySelector(".todo-item-details_title"),this._descriptionElement=i.querySelector(".todo-item-details_description"),i.querySelector(".todo-item-details_date").textContent=`${this._date.toLocaleDateString()} ${this._date.toLocaleTimeString()}`,this.SetData(t[0],t[1],t[2]),i.querySelector(".edit-btn").addEventListener("click",(()=>n(this,void 0,void 0,(function*(){const t=yield(0,d.EditForm)(this);if(null==t)return;const e=t.get("todo-form-title"),i=t.get("todo-form-description"),n=+t.get("todo-form-icon");r.default.Instance.Edit(this._id,e,i,n),this.SetData(e,i,n)})))),i.querySelector(".delete-btn").addEventListener("click",(()=>{r.default.Instance.Delete(this._id),s.removeChild(this._)})),s.appendChild(i),this._=s.querySelector(".todo-item:last-child"),this._.setAttribute("data-item-id",this._id.toString()),this._.addEventListener("dragstart",this.dragStartHandler.bind(this)),this._.addEventListener("drop",this.dropHandler.bind(this)),this._.addEventListener("dragend",this.dragEndHandler.bind(this)),this._.addEventListener("dragover",this.dragOverHandler.bind(this)),this._.addEventListener("dragleave",this.dragLeaveHandler.bind(this))}SetData(t,e,i){(i||0===i)&&(this._imageElement.src=`./JustDoIt/img/${i}.png`),t&&(this._titleElement.textContent=t),e&&(this._descriptionElement.textContent=e)}dragStartHandler(t){a=t.target,s.querySelectorAll(".todo-item").forEach((t=>{this._!==t&&t.classList.add("todo-item-dragover_default")}))}dropHandler(t){t.preventDefault(),this._!==a&&(s.insertBefore(a,this._),r.default.Instance.RelocateObjById(a.getAttribute("data-item-id"),this._.getAttribute("data-item-id")))}dragEndHandler(t){a=null,s.querySelectorAll(".todo-item").forEach((t=>{t.classList.remove("todo-item-dragover_default","todo-item-dragover")}))}dragOverHandler(t){t.preventDefault(),this._!==a&&this._.classList.add("todo-item-dragover")}dragLeaveHandler(t){this._.classList.remove("todo-item-dragover")}}}}},524:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,d=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(d=(r<3?o(d):r>3?o(e,i,d):o(e,i))||d);return r>3&&d&&Object.defineProperty(e,i,d),d},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(i(648)),d=o(i(211));let s=class{constructor(t,e,i,n,o){this._id=null!=n?n:d.default.Instance.GenerateId(),this._date=null!=o?o:new Date,this._title=t,this._description=e,this._toDoType=i}get Id(){return this._id}set Id(t){this._id=t}get Title(){return this._title}set Title(t){if(t.length<3||t.length>64)throw new Error("Title has to be minimum 3 characters long and maximum 64 characters long.");this._title=t}get Description(){return this._description}set Description(t){if(t.length>256)throw new Error("Description has to be maximum 256 characters long.");this._description=t}get ToDoType(){return this._toDoType}set ToDoType(t){this._toDoType=t}};s=n([(0,r.default)()],s),e.default=s},211:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=i(615);class o{constructor(){this.list=[],this.Load()}static get Instance(){return null===o._instance&&(o._instance=new o),o._instance}Save(){localStorage.setItem("todolist",JSON.stringify(this.list.map((t=>(0,n.ToJSON)(t)))))}Load(){var t;this.list=JSON.parse(null!==(t=localStorage.getItem("todolist"))&&void 0!==t?t:"[]").map((t=>(0,n.FromJSON)(t)))}Clear(){this.list=[],this.Save()}Add(t){this.list.push(t),this.Save()}Edit(t,...e){const i=this.list.find((e=>e.Id===t));i&&(i.Title=e[0],i.Description=e[1],i.ToDoType=e[2],this.Save())}Delete(t){const e=this.list.find((e=>e.Id===t));e&&(this.list.splice(this.list.indexOf(e),1),this.Save())}RelocateObjById(t,e){if(t===e)return;const i=this.list.findIndex((e=>e.Id==t)),n=this.list.findIndex((t=>t.Id==e));i<0||n<0||(this.list.splice(i>n?n:n-1,0,this.list.splice(i,1)[0]),this.Save())}GenerateId(){if(0===this.list.length)return 0;let t=0;return this.list.forEach((e=>{e.Id>t&&(t=e.Id)})),t+1}}o._instance=null,e.default=o},9:function(t,e,i){var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function d(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(d,s)}l((n=n.apply(t,e||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.EditForm=e.InitFormModal=void 0;const r=o(i(211)),d=o(i(524)),s=document.getElementById("modal"),l=document.getElementById("todo-form"),a=s.querySelector("h2"),c=l.querySelector("#todo-form-title"),u=l.querySelector("#todo-form-description"),h=l.querySelector("button");function f(t){t.preventDefault(),r.default.Instance.Add(new d.default(c.value,u.value,+l.querySelector("input[name='todo-form-icon']:checked").value)),s.style.display="none"}e.InitFormModal=function(){document.getElementById("add-btn").addEventListener("click",(()=>{a.textContent="New Task",h.textContent="Add",l.addEventListener("submit",f),l.reset(),s.style.display="block"})),document.getElementById("close-btn").addEventListener("click",(()=>s.style.display="none")),window.addEventListener("dblclick",(t=>{t.target==s&&(s.style.display="none")}))},e.EditForm=function(t){return n(this,void 0,void 0,(function*(){return a.textContent="Edit Task",h.textContent="Edit",l.removeEventListener("submit",f),new Promise(((e,i)=>{l.addEventListener("submit",(t=>{t.preventDefault();try{e(new FormData(l))}catch(t){i(null)}finally{s.style.display="none"}}),{once:!0}),l.reset(),c.value=t.Title,u.value=t.Description,l.querySelector(`#todo-form-icon-${t.ToDoType}`).checked=!0,s.style.display="block"}))}))}},615:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.FromJSON=e.ToJSON=void 0;const o=n(i(524));e.ToJSON=function(t){return{_id:t.Id,_title:t.Title,_description:t.Description,_toDoType:t.ToDoType,_date:Date.parse(t._date.toString())}},e.FromJSON=function(t){return new o.default(t._title,t._description,t._toDoType,t._id,new Date(t._date))}}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(859)})();